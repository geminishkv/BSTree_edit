language: cpp
addons:
  apt:
    sources:
    - george-edison55-precise-backports
    packages:
    - cmake
    - cmake-data
    - lcov
cache:
- apt
script:
- cmake -H. -B_build -DCMAKE_INSTALL_PREFIX=_install -DBUILD_TESTS=ON -DBUILD_EXAMPLES=ON
  -DCMAKE_BUILD_TYPE=Coverage -DCPACK_GENERATOR="TGZ"
- cmake --build _build
- cmake --build _build --target install
- cmake --build _build --target test -- ARGS=--verbose
- cmake --build _build --target unit_tests_coverage
- cmake --build _build --target package
notifications:
  email: false
before_deploy:
- git config --local user.name "geminishkv"
- git config --local user.email "gshkvbmstu@gmail.com"
deploy:
  provider: releases
  api_key: "$GITHUB_OAUTH_TOKEN"
  file_glob: true
  file: _build/*.tar.gz
  skip_cleanup: true
  on:
    tags: true
    all_branches: true
env:
  global:
    secure: Y7lDE6dY+/+/IWVcAPISDG/8uf6wea5rF6p5URu+2uCqkKq1iIeSZ6zCignB2fvJBTQH84JoagcbQDgyzjF7s8LuWB7Z2ICiz4AFSkXuhzbzAD0t/Egh0uCceSKP11arAaCNx3+ioasubCZffslka9AKdAjA//hfHL/uxyWZyudxLpikvuqftyL2HjZnJLOwUoTLuC7GuFcVwf5OxhJw3ql3IZpKR1Q2vIDBTgRtxs+3mFlHm6dDdFnCYRdiOAUt5C6/o8sneacycM7uuVAMEwWp9GcgaQissQIZ4jOPDo3ItLLPI25/C/ARfZqGBjuLAo9c2dIFYpq/w+hpivHsqa4pATYGuxf4ovq824e6tAhmnQvESJVS6tF4zJv/FlwdBAghudg3HUacI4XMqbnddwIB1S0A/3jcEK+42T7Bd5A5TUfm4DTF2GlbIkSxukfFC1zw/6QNl+jR+0e21gT9cpyzJEIv8jsYZ16ufRM558vhw1U8P64Bb7e46AN10CSDRFhJhooYv776ahOEoIaHPcotuE1YAgcuuGAb9k6L+ftRGEyi1qqOGVInpxvs6hUAiIdO8eHnyVXRJglGsCKo4JUh07lMvA7jpEGtEG+XclEcsVVnZg85IkcFIrzhDmnErvyMv4M1DQjOb+aCUnKqulr/znxmT+esNqntVv5wYSU=
